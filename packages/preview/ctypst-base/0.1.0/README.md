# ctypst-base

[![Typst Package Version](https://img.shields.io/badge/typst%20package-v0.1.0-blue)](https://github.com/ctypst/ctypst-base)
[![License: LGPL-2.1](https://img.shields.io/badge/License-LGPL--2.1-blue.svg)](https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html)
<!-- TODO: è€ƒè™‘æ·»åŠ å…¶ä»–ç›¸å…³å¾½ç« ï¼Œä¾‹å¦‚ CI/CD çŠ¶æ€ã€ä¸‹è½½é‡ç­‰ (å¦‚æœé€‚ç”¨) -->

ctypst-base æ˜¯ä¸€ä¸ªåŸºç¡€çš„ Typst ä¸­æ–‡æ”¯æŒåº“ï¼Œæ—¨åœ¨ä¸ºä½¿ç”¨ Typst è¿›è¡Œä¸­æ–‡å†™ä½œçš„ç”¨æˆ·æä¾›ä¾¿æ·çš„å­—ä½“é…ç½®å’Œå¸¸ç”¨çš„ä¸­æ–‡æ’ç‰ˆåŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾ä¸Šæ‰‹ï¼Œä¸“æ³¨äºå†…å®¹åˆ›ä½œã€‚

æ‚¨å¯ä»¥**åŸºäº**æœ¬é¡¹ç›®å¼€å‘è‡ªå·±çš„ä¸­æ–‡æ’ç‰ˆæ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒç”± CTypst å°ç»„æä¾›çš„æ¨¡æ¿ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **ä¾¿æ·çš„å­—ä½“é…ç½®**: é€šè¿‡ `setup-base-fonts` å‡½æ•°ï¼Œä¸€é”®è®¾ç½®å¸¸ç”¨çš„ä¸­è‹±æ–‡è¡¬çº¿ã€æ— è¡¬çº¿ã€ç­‰å®½å­—ä½“åŠæ®µè½æ ¼å¼ã€‚
*   **ä¸­æ–‡æ•°å­—è½¬æ¢**: æ”¯æŒå°†é˜¿æ‹‰ä¼¯æ•°å­—è½¬æ¢ä¸ºä¸­æ–‡å¤§å°å†™æ•°å­— (ä¾‹å¦‚ `zhnumber-lower(123)` è¾“å‡º "ä¸€ç™¾äºŒåä¸‰")ã€‚
*   **æ™ºèƒ½æ‹¼éŸ³æ˜¾ç¤º**: èƒ½å¤Ÿå°†å¸¦å£°è°ƒæ•°å­—çš„æ‹¼éŸ³å­—ç¬¦ä¸² (ä¾‹å¦‚ `pinyin("ni3 hao3")`) æ¸²æŸ“ä¸ºæ ‡å‡†çš„æ‹¼éŸ³æ ¼å¼ (nÇ hÇo)ã€‚
*   **ä¸­æ–‡å ä½æ–‡æœ¬**: æä¾› `zhlorem()` å‡½æ•°ï¼Œæ–¹ä¾¿ç”Ÿæˆä¸­æ–‡éšæœºæ–‡æœ¬ï¼Œç”¨äºæ’ç‰ˆæµ‹è¯•ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…å­—ä½“ (æ¨è)

ä¸ºäº†è·å¾—æœ€ä½³çš„æ˜¾ç¤ºæ•ˆæœï¼Œå»ºè®®æ‚¨åœ¨æ‚¨çš„æ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä»¥ä¸‹å­—ä½“ã€‚`ctypst-base` ä¼šä¼˜å…ˆä½¿ç”¨åˆ—è¡¨ä¸­é å‰çš„å­—ä½“ã€‚

*   **ä¸­æ–‡è¡¬çº¿ (Serif):** æ€æºå®‹ä½“ CN, LXGW WenKai SC (éœé¹œæ–‡æ¥· SC), Songti SC, SimSun
*   **ä¸­æ–‡æ— è¡¬çº¿ (Sans-serif):** æ€æºé»‘ä½“ CN, Inter, PingFang SC, SimHei
*   **ä¸­æ–‡ç­‰å®½ (Mono):** éœé¹œæ–‡æ¥· Mono, JetBrains Mono, Source Code Pro, Noto Sans Mono CJK SC, Menlo, Consolas
*   **æ‹‰ä¸æ–‡è¡¬çº¿ (Serif):** Times New Roman, Georgia
*   **æ‹‰ä¸æ–‡æ— è¡¬çº¿ (Sans-serif):** Times New Roman, Georgia
*   **æ‹‰ä¸æ–‡ç­‰å®½ (Mono):** JetBrains Mono, Consolas, Menlo

*æ‚¨ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½åœ¨ `setup-base-fonts` å‡½æ•°ä¸­è‡ªå®šä¹‰å­—ä½“åˆ—è¡¨ã€‚æ‚¨å¯ä»¥åœ¨ Typst çš„å®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºä¸­æ‰¾åˆ°æ›´å¤šå…³äºå­—ä½“å®‰è£…å’Œé…ç½®çš„ä¿¡æ¯ã€‚*

### 2. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨

åœ¨æ‚¨çš„ Typst é¡¹ç›®çš„å…¥å£æ–‡ä»¶ (é€šå¸¸æ˜¯ `.typ` æ–‡ä»¶) çš„å¼€å¤´ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼å¯¼å…¥ `ctypst-base` å¹¶åº”ç”¨åŸºç¡€è®¾ç½®ï¼š

```typ
// ä» Typst Universe å¯¼å…¥ (æ¨èæ–¹å¼ï¼Œå½“åŒ…å‘å¸ƒå)
// #import "@preview/ctypst-base:0.1.0": * 
// è¯·å°† 0.1.0 æ›¿æ¢ä¸ºæœ€æ–°çš„ç‰ˆæœ¬å·ã€‚æ‚¨å¯ä»¥åœ¨é¡¹ç›®çš„ GitHub ä»“åº“æˆ– Typst Universe ä¸ŠæŸ¥æ‰¾æœ€æ–°ç‰ˆæœ¬ã€‚

// å¦‚æœæ˜¯æœ¬åœ°å¼€å‘æˆ–ç›´æ¥ä½¿ç”¨ä»“åº“ä»£ç 
#import "../lib.typ": * // å‡è®¾ lib.typ åœ¨ä¸Šä¸€çº§ç›®å½•

#show: doc => setup-base-fonts(doc)

// --- ä»è¿™é‡Œå¼€å§‹æ‚¨çš„æ–‡æ¡£å†…å®¹ ---

= æˆ‘çš„ç¬¬ä¸€ä¸ªä¸­æ–‡ Typst æ–‡æ¡£

æ¬¢è¿ä½¿ç”¨ ctypst-baseï¼

è¿™æ˜¯ä¸€ä¸ªæ®µè½ï¼Œä½¿ç”¨äº†é»˜è®¤çš„å­—ä½“è®¾ç½®å’Œé¦–è¡Œç¼©è¿›ã€‚
#zhlorem(30)
```

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### å­—ä½“é…ç½®

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`setup-base-fonts` ä¼šåº”ç”¨æ¨èçš„å­—ä½“è®¾ç½®ã€‚æ‚¨ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å­—ä½“åˆ—è¡¨å’Œé¦–è¡Œç¼©è¿›ï¼š

```typ
#show: doc => setup-base-fonts(
  doc,
  cjk-serif-family: ("éœé¹œæ–‡æ¥· SC", "å®‹ä½“"), // ä¼˜å…ˆä½¿ç”¨éœé¹œæ–‡æ¥· SC
  first-line-indent: 2em, // è®¾ç½®é¦–è¡Œç¼©è¿›ä¸º2ä¸ªå­—ç¬¦å®½åº¦
)

= è‡ªå®šä¹‰å­—ä½“å’Œç¼©è¿›

è¿™ä¸ªæ–‡æ¡£å°†ä½¿ç”¨è‡ªå®šä¹‰çš„å­—ä½“å’Œé¦–è¡Œç¼©è¿›è®¾ç½®ã€‚
```

### ä¸­æ–‡æ•°å­—

`ctypst-base` æä¾›äº†å°†é˜¿æ‹‰ä¼¯æ•°å­—è½¬æ¢ä¸ºä¸­æ–‡æ•°å­—çš„åŠŸèƒ½ã€‚

```typ
// å°å†™ä¸­æ–‡æ•°å­—
#zhnumber-lower(0)     // é›¶
#zhnumber-lower(10)    // å
#zhnumber-lower(25)    // äºŒåäº”
#zhnumber-lower(123)   // ä¸€ç™¾äºŒåä¸‰
#zhnumber-lower(10086) // ä¸€ä¸‡é›¶å…«åå…­

// å¤§å†™ä¸­æ–‡æ•°å­— (é€šå¸¸ç”¨äºé‡‘é¢ç­‰æ­£å¼åœºåˆ)
#zhnumber-upper(0)     // é›¶
#zhnumber-upper(10)    // æ‹¾
#zhnumber-upper(25)    // è´°æ‹¾ä¼
#zhnumber-upper(123)   // å£¹ä½°è´°æ‹¾å
#zhnumber-upper(10086) // å£¹ä¸‡é›¶æŒæ‹¾é™†
```
*(æ³¨: `zhnumber-upper` çš„å…·ä½“å®ç°è¯·å‚è€ƒ [`zhnumber.typ`](zhnumber.typ) æ–‡ä»¶)*

### æ‹¼éŸ³

ä½¿ç”¨ `pinyin` å‡½æ•°å¯ä»¥æ–¹ä¾¿åœ°æ˜¾ç¤ºå¸¦å£°è°ƒçš„æ‹¼éŸ³ã€‚

```typ
#pinyin("ni3 hao3, shi4 jie4!") // ä½ å¥½ï¼Œä¸–ç•Œï¼
#pinyin("Typst de zhong1 wen2 pai2 ban3 fei1 chang2 ku4!") // Typst çš„ä¸­æ–‡æ’ç‰ˆéå¸¸é…·ï¼
```

### ä¸­æ–‡éšæœºæ–‡æœ¬

åœ¨è®¾è®¡å’Œæ’ç‰ˆé˜¶æ®µï¼Œå¯ä»¥ä½¿ç”¨ `zhlorem` ç”Ÿæˆä¸­æ–‡å ä½æ–‡æœ¬ã€‚

```typ
== ç¤ºä¾‹æ–‡æœ¬

#zhlorem(50) // ç”Ÿæˆçº¦ 50 ä¸ªå­—ç¬¦çš„ä¸­æ–‡éšæœºæ–‡æœ¬

=== æ›´é•¿çš„ç¤ºä¾‹æ–‡æœ¬

#zhlorem(150)
```

## ğŸ› ï¸ ä¸»è¦ API

ä»¥ä¸‹æ˜¯ `ctypst-base` æä¾›çš„ä¸»è¦å‡½æ•°ï¼š

*   `setup-base-fonts(doc, cjk-serif-family: tuple, cjk-sans-family: tuple, cjk-mono-family: tuple, latin-serif-family: tuple, latin-sans-family: tuple, latin-mono-family: tuple, first-line-indent: length)`
    *   **æè¿°:** åˆå§‹åŒ–æ–‡æ¡£çš„å­—ä½“å’ŒåŸºç¡€æ’ç‰ˆè®¾ç½®ã€‚
    *   **å‚æ•°:**
        *   `doc`: å¿…éœ€ï¼Œä¼ é€’æ–‡æ¡£å†…å®¹ã€‚
        *   `...family`: å¯é€‰ï¼Œå„ç±»å­—ä½“æ—åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºæ¨èå­—ä½“ã€‚
        *   `first-line-indent`: å¯é€‰ï¼Œæ®µè½é¦–è¡Œç¼©è¿›é‡ï¼Œé»˜è®¤ä¸º `1.5em`ã€‚
    *   **è¿”å›:** åº”ç”¨äº†æ ·å¼è®¾ç½®çš„æ–‡æ¡£å†…å®¹ã€‚

*   `zhnumber-lower(number)`
    *   **æè¿°:** å°†éè´Ÿæ•´æ•°è½¬æ¢ä¸ºå°å†™ä¸­æ–‡æ•°å­—å­—ç¬¦ä¸²ã€‚
    *   **å‚æ•°:** `number` (integer) - è¦è½¬æ¢çš„æ•°å­—ã€‚
    *   **è¿”å›:** (string) å°å†™ä¸­æ–‡æ•°å­—ã€‚

*   `zhnumber-upper(number)`
    *   **æè¿°:** å°†éè´Ÿæ•´æ•°è½¬æ¢ä¸ºå¤§å†™ä¸­æ–‡æ•°å­—å­—ç¬¦ä¸²ã€‚
    *   **å‚æ•°:** `number` (integer) - è¦è½¬æ¢çš„æ•°å­—ã€‚
    *   **è¿”å›:** (string) å¤§å†™ä¸­æ–‡æ•°å­—ã€‚

*   `pinyin(pinyin-string)`
    *   **æè¿°:** å°†åŒ…å«æ•°å­—å£°è°ƒçš„æ‹¼éŸ³å­—ç¬¦ä¸²æ¸²æŸ“ä¸ºå¸¦å£°è°ƒç¬¦å·çš„æ‹¼éŸ³ã€‚
    *   **å‚æ•°:** `pinyin-string` (string) - ä¾‹å¦‚ `"ni3 hao3"`ã€‚
    *   **è¿”å›:** æ¸²æŸ“åçš„æ‹¼éŸ³æ–‡æœ¬ã€‚

*   `zhlorem(count)`
    *   **æè¿°:** ç”ŸæˆæŒ‡å®šæ•°é‡ï¼ˆè¿‘ä¼¼ï¼‰çš„ä¸­æ–‡éšæœºæ–‡æœ¬ã€‚
    *   **å‚æ•°:** `count` (integer) - å¸Œæœ›ç”Ÿæˆçš„å­—ç¬¦æ•°é‡ã€‚
    *   **è¿”å›:** ä¸­æ–‡éšæœºæ–‡æœ¬å­—ç¬¦ä¸²ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

*   æŠ¥å‘Š Bug (Issues)
*   æäº¤åŠŸèƒ½è¯·æ±‚ (Issues)
*   æ”¹è¿›æ–‡æ¡£ (Pull Requests)
*   æäº¤ä»£ç  (Pull Requests)

åœ¨æ‚¨å¼€å§‹è´¡çŒ®ä¹‹å‰ï¼Œè¯·èŠ±ç‚¹æ—¶é—´é˜…è¯»æˆ‘ä»¬çš„ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [LGPL-2.1](LICENSE) è®¸å¯è¯ã€‚è¿™æ„å‘³ç€ï¼š

*   **æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š**
    *   **ä½¿ç”¨ (Use):** åœ¨æ‚¨çš„ä»»ä½• Typst é¡¹ç›®ï¼ˆæ— è®ºæ˜¯å¼€æºè¿˜æ˜¯é—­æºï¼‰ä¸­ä½¿ç”¨ `ctypst-base`ã€‚
    *   **åˆ†å‘ (Distribute):** åˆ†å‘ `ctypst-base` çš„åŸå§‹ç‰ˆæœ¬ã€‚
    *   **ä¿®æ”¹ (Modify):** ä¿®æ”¹ `ctypst-base` çš„æºä»£ç ã€‚

*   **åœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹ï¼š**
    *   **å…±äº«ä¿®æ”¹ (Share Alike for Modifications to the Library):** å¦‚æœæ‚¨ä¿®æ”¹äº† `ctypst-base` çš„æºä»£ç ï¼Œå¹¶ä¸”æ‚¨é€‰æ‹©åˆ†å‘è¿™ä¸ªä¿®æ”¹åçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆè¿™ä¸ªä¿®æ”¹åçš„ç‰ˆæœ¬ä¹Ÿå¿…é¡»åœ¨ LGPL-2.1 è®¸å¯ä¸‹æä¾›ã€‚
    *   **å£°æ˜å’Œç‰ˆæƒ (Notice and Copyright):** æ‚¨å¿…é¡»ä¿ç•™åŸå§‹çš„ç‰ˆæƒå£°æ˜å’Œè®¸å¯è¯æ–‡æœ¬ã€‚

*   **è¯·æ³¨æ„ï¼š**
    *   **é“¾æ¥ä¸â€œä¼ æŸ“â€ (No "Viral" Effect on Your Project):** ä»…ä»…åœ¨æ‚¨çš„ Typst æ–‡æ¡£æˆ–é¡¹ç›®ä¸­é€šè¿‡ `#import` ä½¿ç”¨ `ctypst-base`ï¼Œå¹¶**ä¸ä¼š**å¼ºåˆ¶è¦æ±‚æ‚¨çš„æ•´ä¸ªæ–‡æ¡£æˆ–é¡¹ç›®ä¹Ÿå¿…é¡»é‡‡ç”¨ LGPL-2.1 è®¸å¯è¯ã€‚æ‚¨å¯ä»¥ä¸ºæ‚¨çš„ä½œå“é€‰æ‹©ä»»ä½•æ‚¨å¸Œæœ›çš„è®¸å¯è¯ã€‚